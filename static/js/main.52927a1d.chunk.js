(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{36:function(e,a,t){e.exports=t(55)},41:function(e,a,t){},53:function(e,a,t){},54:function(e,a,t){},55:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(28),s=t.n(l),o=(t(41),t(11)),c=t(12),i=t(14),m=t(13),u=t(15),d=t(9),b=t(2),h=t(30),E=t(31),p=t(16),g={CREATE:"USER_CREATE",UPDATE:"USER_UPDATE",DELETE:"USER_DELETE",LOGIN:{SUCCESS:"USER_LOGIN_SUCCESS",ERROR:"USER_LOGIN_ERROR"},LOGIN_:"USER_LOGIN_ERROR",LOGOUT:"USER_LOGOUT"},f=t(6),v=t(25),N=t(32),w=t.n(N),O=t(33),y=t(5);var j=t(35),C={CREATE:"WISHLIST_CREATE",UPDATE:"WISHLIST_UPDATE",DELETE:"WISHLIST_UPDATE"};var R=Object(f.c)({wishlistsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case C.CREATE:return Object(y.a)({},e,{wishlists:[].concat(Object(j.a)(e.wishlists),[a.payload])});case C.UPDATE:return Object(y.a)({},e,{wishlists:[e.wishlists.filter(function(e){return e.id!==a.payload.id}),a.payload]});case C.DELETE:return Object(y.a)({},e,{wishlists:[e.wishlists.filter(function(e){return e.id!==a.payload.id})]});default:return e}},userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case g.CREATE:case g.UPDATE:return Object(y.a)({},e,{user:a.payload});case g.DELETE:return Object(y.a)({},e,{user:{}});case g.LOGIN.SUCCESS:return Object(y.a)({},e,{isLoggedIn:!0,user:a.payload});case g.LOGIN.ERROR:return Object(y.a)({},e,{isLoggedIn:!1});case g.LOGOUT:return Object(y.a)({},e,{isLoggedIn:!1,user:{}});default:return e}}}),L={key:"root",storage:w.a},S=Object(v.a)(L,R),T=Object(f.e)(S,{userReducer:{isLoggedIn:!1}},Object(f.d)(Object(f.a)(O.a),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e})),I=Object(v.b)(T),U={apiUrl:"https://varwish-be.herokuapp.com/",originUrl:"https://varwishteam.github.io/varwish-fe/"};var _=Object(p.f)(function(e){var a=e.history;return e.isLoggedIn?r.a.createElement("button",{type:"button",className:"btn btn-primary btn-block list-group-item",onClick:function(){setTimeout(function(){return a.push("/")},100),T.dispatch({type:g.LOGOUT})}},r.a.createElement("i",{className:"material-icons"},"close"),"Log Out"):r.a.createElement(b.b,{to:"/login",color:"inherit"},r.a.createElement("button",{type:"button",className:"btn btn-primary"},"Log In"))}),k=Object(d.b)(function(e){return{isLoggedIn:e.userReducer.isLoggedIn}},null)(_),x=Object(d.b)(function(e){return{isLoggedIn:e.userReducer.isLoggedIn}},null)(function(e){return!e.isLoggedIn&&r.a.createElement(b.b,{to:"/register",color:"inherit"},r.a.createElement("button",{type:"button",className:"btn btn-primary"},"Register"))});var D=Object(d.b)(function(e){return{user:e.userReducer.user,isLoggedIn:e.userReducer.isLoggedIn}},null)(function(e){return e.user,e.isLoggedIn?r.a.createElement("main",{className:"d-flex flex-row flex-wrap"},r.a.createElement(b.b,{to:"/wishlists/1",className:"w-50"},r.a.createElement("button",{type:"button",className:"btn btn-primary"},"Wishlist 1")),r.a.createElement(b.b,{to:"/wishlists/2",className:"w-50"},r.a.createElement("button",{type:"button",className:"btn btn-primary"},"Wishlist 2")),r.a.createElement(b.b,{to:"/wishlists/3",className:"w-50"},r.a.createElement("button",{type:"button",className:"btn btn-primary"},"Wishlist 3"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"navbar navbar-dark bg-dark"},r.a.createElement("span",{className:"navbar-brand mb-0 h1"},"VarWish"),r.a.createElement("div",{className:"navbar-authbuttons"},r.a.createElement(k,{type:"button"}),r.a.createElement(x,{type:"button"}))),"Not logged in")}),A=t(17),W=(t(53),function(e){function a(){var e,t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(i.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(r)))).state={username:"",password:"",rememberMe:"yes",redirectToReferrer:!1},t.login=function(e){var a,n;e.preventDefault(),(a=t.state.username,n=t.state.password,new Promise(function(e,t){fetch(U.apiUrl+"rest-auth/login/",{method:"POST",headers:{"Content-Type":"application/json",Origin:U.originUrl},body:JSON.stringify({username:a,password:n})}).then(function(a){a.ok?a.json().then(function(a){T.dispatch({type:g.LOGIN.SUCCESS,payload:{firstName:"John",lastName:"Doe",key:a.key}}),e()}):a.json().then(function(e){t(e.non_field_errors[0])}).catch(function(e){console.error(e),t("Error logging in.")})}).catch(function(e){console.error("Error:",e),t("Login error")})})).then(function(){t.setState({redirectToReferrer:!0})}).catch(function(e){t.setState({errorMessage:e})})},t.handleChange=function(e){return function(a){t.setState(Object(A.a)({},e,a.target.value))}},t}return Object(u.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){var e=(this.props.location.state||{from:{pathname:"/"}}).from,a=this.state,t=a.username,n=a.password,l=a.rememberMe,s=a.errorMessage;return a.redirectToReferrer?r.a.createElement(p.a,{to:e}):r.a.createElement("div",{className:"wrapper"},r.a.createElement("form",{className:"form-login"},r.a.createElement("h1",{className:"h3 mb-3 font-weight-normal"},"Please log in"),s&&r.a.createElement("div",{className:"alert alert-danger",role:"alert"},s),r.a.createElement("div",{className:"bmd-form-group"},r.a.createElement("input",{type:"text",className:"form-control",id:"email",placeholder:"Username or Email",value:t,onChange:this.handleChange("username")})),r.a.createElement("div",{className:"bmd-form-group"},r.a.createElement("input",{type:"password",className:"form-control",id:"password",placeholder:"Password",value:n,onChange:this.handleChange("password")})),r.a.createElement("div",{className:"checkbox-inline"},r.a.createElement("label",{htmlFor:"rememberMe"},r.a.createElement("input",{type:"checkbox",id:"rememberMe",value:l,onChange:this.handleChange("rememberMe")}),"Remember me")),r.a.createElement("button",{className:"btn btn-lg btn-primary btn-block btn-outline",onClick:this.login},"Log in")))}}]),a}(n.Component));function P(){return r.a.createElement("div",{className:"d-flex flex-column align-items-center"},r.a.createElement("h1",null,"404"),r.a.createElement("p",{className:"h2"},"Not found"))}t(54);var G=function(e){function a(){var e,t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(i.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(r)))).state={firstName:"",lastName:"",username:"",email:"",passwordSet:"",passwordConfirm:"",redirectToReferrer:!1},t.handleRegister=function(e){e.preventDefault(),function(e){var a=e.firstName,t=e.lastName,n=e.username,r=e.email,l=e.passwordSet,s=e.passwordConfirm;return new Promise(function(e,o){fetch(U.apiUrl+"register/",{method:"POST",headers:{"Content-Type":"application/json",Origin:U.originUrl},body:JSON.stringify({username:n,email:r,password1:l,password2:s,first_name:a,last_name:t})}).then(function(a){a.ok&&a.json().then(function(a){console.log(a),e()})}).catch(function(e){console.error("An error has occured during registraion",e),o("Registration error")})})}(Object(y.a)({},t.state)).then(function(e){console.log(e),t.setState({redirectToReferrer:!0})}).catch(function(e){t.setState({errorMessage:e})})},t.handleChange=function(e){return function(a){t.setState(Object(A.a)({},e,a.target.value))}},t}return Object(u.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){var e=(this.props.location.state||{from:{pathname:"/"}}).from,a=this.state,t=a.username,n=a.passwordSet,l=a.passwordConfirm,s=a.email,o=a.firstName,c=a.lastName,i=a.errorMessage;return a.redirectToReferrer?r.a.createElement(p.a,{to:e}):r.a.createElement("div",{className:"wrapper"},r.a.createElement("form",{className:"form-register"},r.a.createElement("h1",{className:"h3 mb-3 font-weight-normal"},"Register form"),i&&r.a.createElement("div",{className:"alert alert-danger",role:"alert"},i),r.a.createElement("div",{className:"bmd-form-group"},r.a.createElement("input",{type:"text",className:"form-control",id:"username",placeholder:"Username",value:t,onChange:this.handleChange("username")})),r.a.createElement("div",{className:"bmd-form-group"},r.a.createElement("input",{type:"text",id:"email",className:"form-control",placeholder:"Email",value:s,onChange:this.handleChange("email")})),r.a.createElement("div",{className:"bmd-form-group"},r.a.createElement("input",{type:"text",className:"form-control",id:"first-name",placeholder:"First name",value:o,onChange:this.handleChange("firstName")})),r.a.createElement("div",{className:"bmd-form-group"},r.a.createElement("input",{type:"text",className:"form-control",id:"email",placeholder:"Last name",value:c,onChange:this.handleChange("lastName")})),r.a.createElement("div",{className:"bmd-form-group"},r.a.createElement("input",{type:"password",className:"form-control",id:"password",placeholder:"Type in yout password",value:n,onChange:this.handleChange("passwordSet")})),r.a.createElement("div",{className:"bmd-form-group"},r.a.createElement("input",{type:"password",className:"form-control",id:"password",placeholder:"Confirm a password",value:l,onChange:this.handleChange("passwordConfirm")})),r.a.createElement("button",{className:"btn btn-lg btn-primary btn-block btn-outline mt-3",onClick:this.handleRegister},"Register")))}}]),a}(n.Component),M=function(e){function a(){return Object(o.a)(this,a),Object(i.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(u.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,"WishlistDetail")}}]),a}(n.Component);function F(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"navbar navbar-light bg-faded"},r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"drawer","data-target":"#main-drawer","aria-expanded":"false"},r.a.createElement("span",{className:"sr-only"},"Toggle drawer"),r.a.createElement("i",{className:"material-icons"},"menu")),r.a.createElement("ul",{className:"nav navbar-nav"},r.a.createElement("li",{className:"nav-item"},"VarWish"))))}function V(){return r.a.createElement("div",{className:"d-flex flex-column justify-content-between flex-grow-1"},r.a.createElement("ul",{className:"nav flex-column border-bottom"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(b.b,{className:"nav-link p-0",to:"/"},r.a.createElement("button",{type:"button",className:"btn btn-primary btn-block list-group-item","data-toggle":"drawer","data-target":"#main-drawer"},"Wishlists")))),r.a.createElement("ul",{className:"nav flex-column border-top"},r.a.createElement("li",null,r.a.createElement(k,null))))}function J(e){var a=e.children;return r.a.createElement("div",{className:"position-relative vw-100 vh-100"},r.a.createElement("div",{className:"bmd-layout-container bmd-drawer-f-l bmd-drawer-in-lg-up bmd-drawer-overlay-md-down"},r.a.createElement("header",{className:"bmd-layout-header d-lg-none"},r.a.createElement(F,null)),r.a.createElement("div",{id:"main-drawer",className:"bmd-layout-drawer bg-faded","aria-expanded":"false","aria-hidden":"true"},r.a.createElement("header",{className:"d-flex flex-column align-items-center"},r.a.createElement("i",{className:"material-icons md-48"},"list_alt"),r.a.createElement("span",{className:"h3 navbar-brand font-weight-bold"},"VarWish")),r.a.createElement(V,null)),r.a.createElement("main",{className:"bmd-layout-content"},r.a.createElement("div",{className:"container-fluid p-4"},a))))}var X=function(e){var a=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"navbar navbar-dark bg-dark"},r.a.createElement("span",{className:"navbar-brand mb-0 h1"},"VarWish"),r.a.createElement("div",{className:"navbar-authbuttons"},r.a.createElement(k,{type:"button"}),r.a.createElement(x,{type:"button"}))),a)};function H(e){var a=e.component,t=e.isLoggedIn,n=Object(E.a)(e,["component","isLoggedIn"]);return r.a.createElement(p.b,Object.assign({},n,{render:function(e){return t?r.a.createElement(a,e):r.a.createElement(p.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}var B=Object(d.b)(function(e){return{isLoggedIn:e.userReducer.isLoggedIn}},null)(function(e){var a=e.isLoggedIn;return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.d,null,!a&&r.a.createElement(X,null,r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:"/",component:D}),r.a.createElement(p.b,{path:"/login",component:W}),r.a.createElement(p.b,{path:"/register",component:G})," ")," "),r.a.createElement(J,null,r.a.createElement(p.d,null,a&&r.a.createElement(p.b,{exact:!0,path:"/",component:D}),r.a.createElement(H,{path:"/wishlists/:wishlistId",component:M,isLoggedIn:a}),r.a.createElement(p.b,{component:P})))))}),$=function(e){function a(){return Object(o.a)(this,a),Object(i.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(u.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(d.a,{store:T},r.a.createElement(h.a,{loading:r.a.createElement("div",{className:"spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")),persistor:I},r.a.createElement(b.a,{basename:"/varwish-fe"},r.a.createElement(B,null))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement($,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[36,1,2]]]);
//# sourceMappingURL=main.52927a1d.chunk.js.map