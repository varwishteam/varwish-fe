(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{140:function(e,t,a){e.exports=a(255)},145:function(e,t,a){},253:function(e,t,a){},254:function(e,t,a){},255:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(107),s=a.n(l),o=(a(145),a(22)),i=a(23),c=a(27),m=a(24),u=a(26),d=a(8),E=a(11),p=a(109),h=a(6),b=a(79),S=a(110),g=a.n(S),f=a(111),R=a(9),O={SIGN_UP:{SUCCESS:"USER_SIGN_UP_SUCCESS",ERROR:"USER_SIGN_UP_ERROR",RESET_ERRORS:"USER_SIGN_UP_RESET_ERRORS"},UPDATE:{SUCCESS:"USER_UPDATE_SUCCESS",ERROR:"USER_UPDATE_ERROR"},DELETE:{SUCCESS:"USER_DELETE_SUCCESS",ERROR:"USER_DELETE_ERROR"},LOGIN:{SUCCESS:"USER_LOGIN_SUCCESS",ERROR:"USER_LOGIN_ERROR",RESET_ERRORS:"USER_LOGIN_RESET_ERRORS"},LOGOUT:{SUCCESS:"USER_LOGOUT_SUCCESS",ERROR:"USER_LOGOUT_ERROR"}},w={apiUrl:"https://varwish-be.herokuapp.com/",originUrl:"https://varwishteam.github.io/varwish-fe/"},N=void 0,v=function(e,t,a){return fetch(w.apiUrl+t+"/",{method:e,headers:{"Content-Type":"application/json",Authorization:N&&"Token  ".concat(N),Origin:w.originUrl},body:JSON.stringify(a)}).then(function(e){return e.json()})},y=function(e,t){return v("post",e,t)},C=function(e){console.log("Setting currentAuthToken to ".concat(e)),N=e},U={LOGIN:"rest-auth/login",LOGOUT:"rest-auth/logout",SIGN_UP:"sign-up",WISHLISTS:"wishlists"},L={CREATE:{SUCCESS:"WISHLIST_CREATE_SUCCESS",ERROR:"WISHLIST_CREATE_ERROR"},GET:{SUCCESS:"WISHLIST_GET_SUCCESS",ERROR:"WISHLIST_GET_ERROR"},GET_ALL:{SUCCESS:"WISHLIST_GET_ALL_SUCCESS",ERROR:"WISHLIST_GET_ALL_ERROR"},UPDATE:{SUCCESS:"WISHLIST_UPDATE_SUCCESS",ERROR:"WISHLIST_UPDATE_ERROR"},DELETE:{SUCCESS:"WISHLIST_DELETE_SUCCESS",ERROR:"WISHLIST_DELETE_ERROR"}};var _=a(80);var I=a(106),T=Object(h.c)({wishlistsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L.CREATE.SUCCESS:return Object(R.a)({},e,{wishlists:[].concat(Object(_.a)(e.wishlists),[t.payload])});case L.GET_ALL.SUCCESS:return Object(R.a)({},e,{wishlists:t.payload});case L.GET.SUCCESS:return Object(R.a)({},e,{wishlists:[].concat(Object(_.a)(e.wishlists),[t.payload])});case L.UPDATE.SUCCESS:return Object(R.a)({},e,{wishlists:[e.wishlists.filter(function(e){return e.id!==t.payload.id}),t.payload]});case L.DELETE.SUCCESS:return Object(R.a)({},e,{wishlists:[e.wishlists.filter(function(e){return e.id!==t.payload.id})]});default:return e}},userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O.SIGN_UP.SUCCESS:return Object(R.a)({},e,{isLoggedIn:!0,user:t.payload,signUpError:null});case O.SIGN_UP.ERROR:return Object(R.a)({},e,{isLoggedIn:!1,user:null,signUpError:t.payload});case O.SIGN_UP.RESET_ERRORS:return Object(R.a)({},e,{signUpError:null});case O.UPDATE.SUCCESS:return Object(R.a)({},e,{user:t.payload});case O.DELETE.SUCCESS:return Object(R.a)({},e,{user:{}});case O.LOGIN.SUCCESS:return Object(R.a)({},e,{isLoggedIn:!0,user:t.payload,loginError:null});case O.LOGIN.ERROR:return Object(R.a)({},e,{isLoggedIn:!1,user:null,loginError:t.payload});case O.LOGIN.RESET_ERRORS:return Object(R.a)({},e,{loginError:null});case O.LOGOUT:return Object(R.a)({},e,{isLoggedIn:!1,user:{}});default:return e}},form:I.a}),j={key:"root",storage:g.a},G=Object(b.a)(j,T),x=Object(h.e)(G,{userReducer:{isLoggedIn:!1,user:{}},wishlistsReducer:{wishlists:[]}},Object(h.d)(Object(h.a)(f.a,function(e){return function(e){return function(t){return t.type===O.LOGIN.SUCCESS&&C(t.payload.key),"persist/REHYDRATE"===t.type&&t.payload&&C(t.payload.userReducer.user.key),t.type===O.LOGOUT&&C(null),e(t)}}}),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e})),k=Object(b.b)(x),D=a(31),W=Object(D.f)(function(e){var t=e.history,a=e.isLoggedIn,n=e.dispatchLogOut;return a?r.a.createElement("button",{type:"button",className:"btn btn-primary btn-block list-group-item",onClick:function(){n().then(function(){return t.push("/")})}},r.a.createElement("i",{className:"material-icons"},"close"),"Log Out"):r.a.createElement(E.b,{to:"/login",color:"inherit"},r.a.createElement("button",{type:"button",className:"btn btn-primary"},"Log In"))}),A=Object(d.b)(function(e){return{isLoggedIn:e.userReducer.isLoggedIn}},function(e){return{dispatchLogOut:function(){return e(function(e){return y(U.LOGOUT).then(function(t){e({type:O.LOGOUT})})})}}})(W),P=Object(d.b)(function(e){return{isLoggedIn:e.userReducer.isLoggedIn}},null)(function(e){return!e.isLoggedIn&&r.a.createElement(E.b,{to:"/sign-up",color:"inherit"},r.a.createElement("button",{type:"button",className:"btn btn-primary"},"Sign Up"))}),M=a(114),F=a(57),H=a(104),V=a(105),$=function(e){var t=e.input,a=e.label,n=e.type,l=e.meta,s=l.touched,o=l.error,i=l.warning;return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:t.name},a),r.a.createElement("div",null,r.a.createElement("input",Object.assign({className:"form-control ".concat(o&&"is-invalid")},t,{placeholder:a,type:n})),s&&(o&&r.a.createElement("span",{className:"text-danger"},o)||i&&r.a.createElement("span",{className:"text-warning"},i))))},J=Object(V.a)({form:"wishlistForm",validate:function(e){var t={};return e.wishlistName||(t.wishlistName="Required"),e.wishlistDescription||(t.wishlistDescription="Required"),t},warn:function(e){return{}}})(function(e){var t={saveDisabled:!1},a=Object(n.useState)(t),l=Object(M.a)(a,2),s=l[0],o=l[1],i=e.handleSubmit,c=e.submitting;return r.a.createElement("div",{className:"modal fade",id:"exampleModal",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalTitle","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog modal-dialog-centered",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"exampleModalTitle"},"New wishlist"),r.a.createElement("div",{className:"flex-grow-1"}),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("form",{id:"wishlistForm",onSubmit:i(function(e){x.dispatch(function(e){return function(t,a){return y(U.WISHLISTS,{name:e.wishlistName,description:e.wishlistDescription,user:a().userReducer.user.id,items:e.items||[]}).then(function(e){return t({type:L.CREATE.SUCCESS,payload:e})}).catch(function(e){return t({type:L.CREATE.ERROR,payload:e})})}}(e)),o({saveDisabled:!0}),window.$("#exampleModal").on("hidden.bs.modal",function(e){o(t),x.dispatch(Object(F.a)("wishlistForm"))}),window.$("#exampleModal").modal("hide")})},r.a.createElement("div",{className:"modal-body"},r.a.createElement("div",{className:"form-group"},r.a.createElement(H.a,{name:"wishlistName",component:$,type:"text",label:"Wishlist name"})),r.a.createElement("div",{className:"form-group"},r.a.createElement(H.a,{name:"wishlistDescription",component:$,type:"text",label:"Wishlist description"}))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(){window.$("#exampleModal").on("hidden.bs.modal",function(e){o(t),x.dispatch(Object(F.a)("wishlistForm"))}),window.$("#exampleModal").modal("hide")}},"Cancel"),r.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:s.saveDisabled||c},"Save"))))))});function X(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"navbar navbar-light bg-faded"},r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"drawer","data-target":"#main-drawer","aria-expanded":"false"},r.a.createElement("span",{className:"sr-only"},"Toggle drawer"),r.a.createElement("i",{className:"material-icons"},"menu")),r.a.createElement("ul",{className:"nav navbar-nav"},r.a.createElement("li",{className:"nav-item"},"VarWish"))))}function q(){return r.a.createElement("div",{className:"d-flex flex-column justify-content-between flex-grow-1"},r.a.createElement("ul",{className:"nav flex-column border-bottom"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(E.b,{className:"nav-link p-0",to:"/"},r.a.createElement("button",{type:"button",className:"btn btn-primary btn-block list-group-item","data-toggle":"drawer","data-target":"#main-drawer"},"Wishlists")))),r.a.createElement("ul",{className:"nav flex-column border-top"},r.a.createElement("li",null,r.a.createElement(A,null))))}function B(e){var t=e.children;return r.a.createElement("div",{className:"position-relative vw-100 vh-100"},r.a.createElement("div",{className:"bmd-layout-container bmd-drawer-f-l bmd-drawer-in-lg-up bmd-drawer-overlay-md-down"},r.a.createElement("header",{className:"bmd-layout-header d-lg-none"},r.a.createElement(X,null)),r.a.createElement("div",{id:"main-drawer",className:"bmd-layout-drawer bg-faded","aria-expanded":"false","aria-hidden":"true"},r.a.createElement("header",{className:"d-flex flex-column align-items-center"},r.a.createElement("i",{className:"material-icons md-48"},"list_alt"),r.a.createElement("span",{className:"h3 navbar-brand font-weight-bold"},"VarWish")),r.a.createElement(q,null)),r.a.createElement("main",{className:"bmd-layout-content"},r.a.createElement("div",{className:"container-fluid p-4"},t))))}var z=function(e){var t=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"navbar navbar-dark bg-dark"},r.a.createElement("span",{className:"navbar-brand mb-0 h1"},"VarWish"),r.a.createElement("div",{className:"navbar-authbuttons"},r.a.createElement(A,{type:"button"}),r.a.createElement(P,{type:"button"}))),t)},Y=a(113);var K=Object(d.b)(function(e){return{user:e.userReducer.user,isLoggedIn:e.userReducer.isLoggedIn}},null)(function(e){return e.user,e.isLoggedIn?r.a.createElement("main",{className:"d-flex flex-row flex-wrap"},r.a.createElement("button",{type:"button",className:"btn btn-dark w-50","data-toggle":"modal","data-target":"#exampleModal"},r.a.createElement("i",{className:"material-icons"},"add"),"New Wishlist"),r.a.createElement(E.b,{to:"/wishlists/1",className:"w-50"},r.a.createElement("button",{type:"button",className:"btn btn-primary"},"Wishlist 1")),r.a.createElement(E.b,{to:"/wishlists/2",className:"w-50"},r.a.createElement("button",{type:"button",className:"btn btn-primary"},"Wishlist 2")),r.a.createElement(E.b,{to:"/wishlists/3",className:"w-50"},r.a.createElement("button",{type:"button",className:"btn btn-primary"},"Wishlist 3"))):r.a.createElement(r.a.Fragment,null,"Not logged in")}),Q=a(34),Z=(a(253),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",rememberMe:"yes",redirectToReferrer:!1},a.login=function(e){e.preventDefault(),a.props.dispatchLogIn(a.state.username,a.state.password),a.setState({redirectToReferrer:!0})},a.handleChange=function(e){return function(t){a.setState(Object(Q.a)({},e,t.target.value))}},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){this.props.resetLoginErrors()}},{key:"render",value:function(){var e=(this.props.location.state||{from:{pathname:"/"}}).from,t=this.state,a=t.username,n=t.password,l=t.rememberMe,s=t.redirectToReferrer,o=this.props.loginError;return s?r.a.createElement(D.a,{to:e}):r.a.createElement("div",{className:"wrapper"},r.a.createElement("form",{className:"form-login"},r.a.createElement("h1",{className:"h3 mb-3 font-weight-normal"},"Please log in"),o&&r.a.createElement("div",{className:"alert alert-danger",role:"alert"},JSON.stringify(o.error)),r.a.createElement("div",{className:"bmd-form-group"},r.a.createElement("input",{type:"text",className:"form-control",id:"username",placeholder:"Username or Email",value:a,onChange:this.handleChange("username")})),r.a.createElement("div",{className:"bmd-form-group"},r.a.createElement("input",{type:"password",className:"form-control",id:"password",placeholder:"Password",value:n,onChange:this.handleChange("password")})),r.a.createElement("div",{className:"checkbox-inline"},r.a.createElement("label",{htmlFor:"rememberMe"},r.a.createElement("input",{type:"checkbox",id:"rememberMe",value:l,onChange:this.handleChange("rememberMe")}),"Remember me")),r.a.createElement("button",{type:"button",className:"btn btn-lg btn-primary btn-block btn-outline",onClick:this.login},"Log in")))}}]),t}(n.Component)),ee=Object(d.b)(function(e){return{loginError:e.userReducer.loginError}},function(e){return{dispatchLogIn:function(t,a){return e(function(e,t){return function(a){return y(U.LOGIN,{username:e,password:t}).then(function(e){e.user&&e.key?a({type:O.LOGIN.SUCCESS,payload:{id:e.user,key:e.key}}):a({type:O.LOGIN.ERROR,payload:{error:e}})})}}(t,a))},resetLoginErrors:function(){return e({type:O.LOGIN.RESET_ERRORS})}}})(Z);function te(){return r.a.createElement("div",{className:"d-flex flex-column align-items-center"},r.a.createElement("h1",null,"404"),r.a.createElement("p",{className:"h2"},"Not found"))}a(254);var ae=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={firstName:"",lastName:"",username:"",email:"",passwordSet:"",passwordConfirm:"",redirectToReferrer:!1},a.handleSignUp=function(e){e.preventDefault(),a.props.dispatchSignUp(Object(R.a)({},a.state)),a.setState({redirectToReferrer:!0})},a.handleChange=function(e){return function(t){a.setState(Object(Q.a)({},e,t.target.value))}},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){this.props.resetSignUpErrors()}},{key:"render",value:function(){var e=(this.props.location.state||{from:{pathname:"/"}}).from,t=this.state,a=t.username,n=t.passwordSet,l=t.passwordConfirm,s=t.email,o=t.firstName,i=t.lastName,c=t.redirectToReferrer,m=this.props.signUpError;return c?r.a.createElement(D.a,{to:e}):r.a.createElement("div",{className:"wrapper"},r.a.createElement("form",{className:"form-signup"},r.a.createElement("h1",{className:"h3 mb-3 font-weight-normal"},"Sign Up"),m&&r.a.createElement("div",{className:"alert alert-danger",role:"alert"},m),r.a.createElement("div",{className:"bmd-form-group"},r.a.createElement("input",{type:"text",className:"form-control",id:"username",placeholder:"Username",value:a,onChange:this.handleChange("username")})),r.a.createElement("div",{className:"bmd-form-group"},r.a.createElement("input",{type:"text",id:"email",className:"form-control",placeholder:"Email",value:s,onChange:this.handleChange("email")})),r.a.createElement("div",{className:"bmd-form-group"},r.a.createElement("input",{type:"text",className:"form-control",id:"first-name",placeholder:"First name",value:o,onChange:this.handleChange("firstName")})),r.a.createElement("div",{className:"bmd-form-group"},r.a.createElement("input",{type:"text",className:"form-control",id:"last-name",placeholder:"Last name",value:i,onChange:this.handleChange("lastName")})),r.a.createElement("div",{className:"bmd-form-group"},r.a.createElement("input",{type:"password",className:"form-control",id:"password",placeholder:"Type in yout password",value:n,onChange:this.handleChange("passwordSet")})),r.a.createElement("div",{className:"bmd-form-group"},r.a.createElement("input",{type:"password",className:"form-control",id:"password-confirm",placeholder:"Confirm a password",value:l,onChange:this.handleChange("passwordConfirm")})),r.a.createElement("button",{type:"button",className:"btn btn-lg btn-primary btn-block btn-outline mt-3",onClick:this.handleSignUp},"Sign Up")))}}]),t}(n.Component),ne=Object(d.b)(function(e){return{signUpError:e.userReducer.signUpError}},function(e){return{dispatchSignUp:function(t){return e(function(e){var t=e.firstName,a=e.lastName,n=e.username,r=e.email,l=e.passwordSet,s=e.passwordConfirm;return function(e){return y(U.SIGN_UP,{username:n,email:r,password1:l,password2:s,first_name:t,last_name:a}).then(function(t){t.user&&t.key?e({type:O.SIGN_UP.SUCCESS,payload:{id:t.user,key:t.key}}):e({type:O.SIGN_UP.ERROR,payload:{error:t}})})}}(t))},resetSignUpErrors:function(){return e({type:O.SIGN_UP.RESET_ERRORS})}}})(ae),re=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.setState({wishlist:this.props.wishlists.filter(function(t){return t.id===e.props.match.params.wishlistId})}),this.state.wishlist!==[]&&void 0!==this.state.wishlist||this.setState({notFound:!0})}},{key:"render",value:function(){var e=this.props.match,t=this.state.wishlist;return this.state.notFound?r.a.createElement("p",null,"Wishlist with id: ",e.params.wishlistId," was not found!"):r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,e.params.wishlistId),r.a.createElement("h1",null,t.name),r.a.createElement("p",null,t.description))}}]),t}(n.Component),le=Object(d.b)(function(e){return{wishlists:e.wishlistsReducer.wishlists}},null)(re),se=function(e){return e?r.a.createElement(B,null,r.a.createElement(D.d,null,r.a.createElement(D.b,{exact:!0,path:"/",component:K}),r.a.createElement(oe,{path:"/wishlists/:wishlistId",component:le,isLoggedIn:e}))):r.a.createElement(z,null,r.a.createElement(D.d,null,r.a.createElement(D.b,{exact:!0,path:"/",component:K}),r.a.createElement(D.b,{path:"/login",component:ee}),r.a.createElement(D.b,{path:"/sign-up",component:ne})))};function oe(e){var t=e.component,a=e.isLoggedIn,n=Object(Y.a)(e,["component","isLoggedIn"]);return r.a.createElement(D.b,Object.assign({},n,{render:function(e){return a?r.a.createElement(t,e):r.a.createElement(D.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}var ie=Object(d.b)(function(e){return{isLoggedIn:e.userReducer.isLoggedIn}},null)(function(e){var t=e.isLoggedIn;return r.a.createElement(r.a.Fragment,null,r.a.createElement(D.d,null,se(t),r.a.createElement(D.b,{component:te})))}),ce=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(d.a,{store:x},r.a.createElement(p.a,{loading:r.a.createElement("div",{className:"spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")),persistor:k},r.a.createElement(E.a,{basename:"/varwish-fe"},r.a.createElement(ie,null)),r.a.createElement(J,null)))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(ce,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[140,1,2]]]);
//# sourceMappingURL=main.0e4a4c40.chunk.js.map